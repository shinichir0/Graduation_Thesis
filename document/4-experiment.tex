\chapter{評価実験}

\section{実験1}
\subsection{実験目的}
接続セグメントに時間軸を導入したHTMにおける適切なセグメント集合のサイズ検定

\subsection{実験概要}
改良型のHTMは従来型に比べてセグメント集合の次元が時間軸によって１次元拡張されているが、
セグメント集合を表すテンソルの大きさは一致するように調整している。
HTMにおけるセグメント集合の次元は従来型で３次元、改良型で４次元となっており、これが各セルごとに存在しているが、実装ではすべてのセルのセグメント集合をまとめて定義している。
これによってHTM全体でのセグメント集合は従来型で５次元、改良型で６次元となっている。
本実験ではセグメント集合のサイズをテンソルの合計の大きさを変えずに様々な条件で検定する。

セグメント集合のサイズは以下の４つのパラメータによって決まる。
\begin{itemize}
  \item カラム数
  \item セル数
  \item セグメント数
  \item 時間軸長
\end{itemize}

カラム数とセル数は接続元のセルと接続先のセルの２つのセルの位置を示すために２度用いられる。
セグメント集合のテンソルの合計の大きさ$S$は、カラム数を$N$、セル数を$M$、セグメント数を$d$、時間軸長を$\tau_c$とすると以下の式で表される。

\begin{equation}
  S = N^2 * M^2 * d * \tau_c
\end{equation}

実験に用いた従来型HTMのパラメータの値は以下の通りである。
\begin{table}[hbtp]
  \caption{従来型HTMのパラメータの値}
  \label{old_htm_parameter}
  \centering
  \begin{tabular}{lr}
    \hline
    パラメータ & 値 \\
    \hline \hline
    カラム数(N) & 512 \\
    セル数(M) & 16 \\
    セグメント数(d) & 32 \\
    時間軸長($\tau_c$) & 1 \\
    \hline
  \end{tabular}
\end{table}

従来型HTMは接続セグメントに時間軸を導入していないため、時間軸長は$1$となっている。
表4.1より、従来型HTMのセグメント集合のテンソルの合計の大きさ$S$は$S=512^2*16^2*32*1=2^{31}$となる。

改良型HTMのセグメント集合のテンソルの合計の大きさは従来型HTMと同じ$2^{31}$と統一した。

\subsection{実験条件}
改良型HTMにおける適切なセグメント集合のサイズ検定を行うため、以下の表の5通りで実験を行った。

\begin{table}[hbtp]
  \caption{各通りにおける改良型HTMのパラメータの値}
  \label{htm_parameter}
  \centering
  \begin{tabular}{c|l|rrrrr}
    \hline
    \multicolumn{2}{c|}{} & \multicolumn{5}{c}{各条件における値} \\
    \hline
    \multicolumn{2}{c|}{} & 1 & 2 & 3 & 4 & 5 \\
    \hline \hline
    \multirow{4}{*}{\rotatebox[origin=c]{90}{パラメータ}}
    & カラム数(N) & 512 & 512 & 512 & 512 & 256 \\
    & セル数(M) & 16 & 16 & 8 & 8 & 16 \\
    & セグメント数(d) & 4 & 8 & 16 & 8 & 8 \\
    & 時間軸長($\tau_c$) & 8 & 4 & 8 & 16 & 16 \\
    \hline
  \end{tabular}
\end{table}

\subsection{実験結果}

\subsection{実験考察}
本実験には以下の３つの傾向が現れた。

\begin{enumerate}
  \item カラム数の減少は性能の低下に大きく影響する。
  \item セル数やセグメント数の減少は性能の低下にほとんど影響しない。
  \item 時間軸長の増加は性能の向上に影響する。
\end{enumerate}

１つ目に関しては、カラム数がパターンの表現に直接影響することによるものだと考えられる。
2.2.2で述べたようにHTMにおけるパターンの表現はカラムの組み合わせによるものである。
カラム数が少なくなると各パターンを表現するカラムに重複するものが多くなる。
それによってパターンの誤予測が多くなり、HTMの性能が低下する。

２つ目に関しては、セル数やセグメント数は学習の柔軟性に関わる部分であるため、少しの減少で学習の精度に影響することはないのだと考えられる。

３つ目は本研究で導入したものであるが、性能の向上に貢献することがわかった。
時間軸長が長いほど性能が高いため実験２以降では時間軸長16のモデルを使用する。

以上の３つから実験２以降は実験条件４のモデルを用いる。

\section{実験2}
\subsection{実験目的}
改良型HTMにおける長期依存考慮の性能検定

\subsection{実験概要}
様々な合成関数を学習させた提案モデルを従来型のHTMとLSTM、GRUを比較

\subsection{実験条件}

\begin{itemize}
  \item 改良型HTM
  \item HTM
  \item LSTM
  \item GRU
\end{itemize}

\subsection{実験結果}
\subsection{実験考察}
\section{実験3}
\subsection{実験目的}
改良型HTMにおける同時並行予測を必要とする長期依存考慮の性能検定

\subsection{実験概要}
様々な合成関数を学習させた提案モデルを従来型のHTMとLSTM、GRUを比較

\subsection{実験条件}

\begin{itemize}
  \item 改良型HTM
  \item HTM
  \item LSTM
  \item GRU
\end{itemize}

\subsection{実験結果}
\subsection{実験考察}
